<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">


    </head>
    <body>
        <nav th:fragment="cart_for_order_fragment">

            <div class="section-card">
                <div class="section-title">
                    <span class="cart-toggle-area">
                        üõí –ö–æ—Ä–∑–∏–Ω–∞ 
                        <span th:if="${positions != null and !positions.empty}" 
                              th:text="'(' + ${positions.size()} + ')'" 
                              class="cart-item-count">
                        </span>
                    </span>
                    <div>                        
                        <button onclick="toggleCart()" class="cart-toggle-btn">
                            <span id="cartToggleIcon">‚ñº</span>
                        </button>
                    </div>
                </div>

                <div id="cartContent" class="cart-collapsed">
                    <div th:if="${positions != null and !positions.empty}">
                        <div th:each="position : ${positions}" class="cart-item">
                            <img th:src="@{${position.product.img}}" class="cart-item-img" th:alt="${position.product.name}">
                            <div class="cart-item-info">
                                <div class="cart-item-name" th:text="${position.product.name}"></div>
                                <div class="cart-item-details">
                                    <span th:text="${#numbers.formatDecimal(position.quantity, 1, 3) + ' –∫–≥'}"></span>
                                    <span th:if="${position.consumer != null}" th:text="' | ' + ${position.consumer}"></span>
                                </div>
                            </div>
                            <div class="cart-item-actions">
                                <form th:action="@{/order/deletePosition}" method="post">
                                    <input type="hidden" name="id" th:value="${position.id}">
                                    <button type="submit" class="btn btn-danger btn-sm">√ó</button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div th:if="${positions == null or positions.empty}" class="empty-cart">
                        –ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞
                    </div>

                    <div class="action-buttons" th:if="${positions != null and !positions.empty}">
                        <form th:action="@{/order/create}" method="post">
                            <button type="submit" class="btn btn-primary">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
                        </form>
                        <form th:action="@{/order/clear}" method="post" style="display: inline;">
                            <button type="submit" class="btn btn-danger btn-sm">–û—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
                        </form>
                    </div>
                </div>
            </div>

        </nav>
    </body>

</html>





